<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
 xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>UserPage</title>
<link rel="stylesheet" type="text/css" th:href="@{/css/todo.css}">
</head>
<body>
 <header class="header fixed">
  <form method="post" th:action="@{/logout}" name="logout">
   <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
   <a href="javascript:logout.submit()" class="text">ログアウト</a>
  </form>
  <div class="border"></div>
  <a th:href="@{/main}" class="text">カレンダー</a>
  <div class="border"></div>
  <a
   th:href="@{/main/create/{date}(date=${#temporals.format(#temporals.createNow(), 'yyyy-MM-dd')})}"
   class="text">登録</a>
 </header>
 <div class="form_back sd">
  <div class="form sd">
   <div class="title sd">Edit</div>
   <form method="post" th:action="@{/main/edit/{id}(id=${task.id})}" th:object="${task}">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    <input type="hidden" th:field="*{id}" /> 
    <div class="sd">
     <div class="form_row sd">
      <p class="form_text sd">タイトル：</p>
      <div class="form_item">
       <input type="text" th:field="*{title}" class="item">
      </div>
     </div>
     <div class="form_row sd">
      <p class="form_text sd">日付：</p>
      <div class="form_item">
       <input type="date" th:field="*{date}" class="item">
      </div>
     </div>
     <div class="form_row sd">
      <p class="form_text sd">内容:</p>
      <div class="form_item">
       <textarea th:field="*{text}" cols="80" rows="10" class="item"></textarea>
      </div>
     </div>
     <div class="form_row sd">
      <p class="form_text sd">完了：</p>
      <div class="form_item">
       <input type="checkbox" th:field="*{done}" class="checkbox">
      </div>
     </div>
     <button class="form_button sd" type="submit">
      <p class="form_button_text sd">更新</p>
     </button>
    </div>
   </form>
   
   <form th:action="@{'/main/delete/' + ${task.id}}" th:method="post"
    class="form_box sd" style="width: 100%; max-width: 100%">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    <button class="form_button delete sd" type="submit">
     <p class="form_button_text sd">削除</p>
    </button>
   </form>
   
  </div>
 </div>
</body>
</html>